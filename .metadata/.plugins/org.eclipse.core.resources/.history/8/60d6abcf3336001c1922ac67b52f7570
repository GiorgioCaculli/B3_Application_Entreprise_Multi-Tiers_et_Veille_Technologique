package be.helha.aemt.dao;

import java.util.List;

import javax.persistence.NoResultException;
import javax.persistence.Query;

import be.helha.aemt.entities.Adresse;
import be.helha.aemt.entities.Article;
import be.helha.aemt.entities.Commande;
import be.helha.aemt.entities.Utilisateur;

public class CommandeDAO extends DAO< Commande >
{
    private ArticleDAO articleDAO;

    public CommandeDAO( String dbName )
    {
        super( dbName );
        articleDAO = new ArticleDAO( dbName );
    }
    
    public List< Commande > findCommandesByUtilisateur( Utilisateur u )
    {
        if( u == null || u.getLogin() == null )
        {
            return null;
        }
        String loginQuery = "SELECT u.commandes FROM Utilisateur u WHERE u.login = :login";
        Query query = em.createQuery( loginQuery );
        query.setParameter( "login", u.getLogin() );
        List< Commande > resultAdresse = query.getResultList();
        em.clear();
        return resultAdresse;
    }
    
    public List< Commande > findCommandeByArticle( Article a )
    {
        if( a == null || a.getLibelle() == null )
        {
            return null;
        }
        String loginQuery = "SELECT c FROM Commande c INNER JOIN Article u.articles a WHERE a.libelle = :libelle";
        Query query = em.createQuery( loginQuery );
        query.setParameter( "libelle", a.getLibelle() );
        List< Commande > resultAdresse = query.getResultList();
        em.clear();
        return resultAdresse;
    }

    @Override
    public Commande create( Commande commande )
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Commande read( Integer id )
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Commande update( Commande object1, Commande object2 )
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Commande delete( Commande object )
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public List< Commande > findAll()
    {
        // TODO Auto-generated method stub
        return null;
    }

}
